<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>カメラ映像</title>
</head>
<body>
    <div>
            <video id="video1"></video>
            <video id="video2"></video>
            <video id="video3"></video>
    </div>
    <script>

    var arr = [];

      //デバイス一覧取得
      navigator.mediaDevices.enumerateDevices().then(gotDevices).catch(handleError);

      //デバイス情報取得
      function gotDevices(deviceInfos) {
        // Handles being called several times to update labels. Preserve values.
        for (let i = 0; i !== deviceInfos.length; ++i) {
          const deviceInfo = deviceInfos[i];
          if (deviceInfo.kind === 'videoinput') {
            arr.push(deviceInfo.deviceId)
          } else if (deviceInfo.kind === 'audiooutput') { //audiooutputの時は何もしない
          } else if (deviceInfo.kind === 'audioinput') {  //audioinputの時は何もしない
          } else {
            console.log('Some other kind of source/device: ', deviceInfo);
          }
        }
      }

      //デバイス取得エラー対応
      function handleError(error) {
        console.log('navigator.MediaDevices.getUserMedia error: ', error.message, error.name);
      }

      console.log(arr[0])
      console.log(arr[1])
      console.log(arr[2])
      console.log(arr[3])


        //Video1再生
        const video1 = document.getElementById("video1")
        navigator.mediaDevices.getUserMedia({
            audio: false,
            //video: true,
		           //video: { facingMode: "user" },//インカメラ
               video: { deviceId: { exact: "'"+arr[0]+"'"} }           
        }).then(stream => {
            video1.srcObject = stream;
            video1.play()
        }).catch(e => {
          console.log(e)
        })

        //Video2再生
        const video2 = document.getElementById("video2")
        navigator.mediaDevices.getUserMedia({
            audio: false,
            //video: true,
		          //video: { facingMode: "environment" },//背面カメラ
              video: { deviceId: { exact: "'"+arr[1]+"'"} }
        }).then(stream => {
            video2.srcObject = stream;
            video2.play()
        }).catch(e => {
          console.log(e)
        })

        //Video3再生
        const video3 = document.getElementById("video3")
        navigator.mediaDevices.getUserMedia({
            audio: false,
            //video: true,
              video: { deviceId: { exact: "'"+arr[2]+"'"} }
		          //video: { deviceId: arr[3] },//背面カメラ
        }).then(stream => {
            video3.srcObject = stream;
            video3.play()
        }).catch(e => {
          console.log(e)
        })

    </script>
</body>
</html>
